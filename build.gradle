plugins {
    id 'org.springframework.boot' version '1.5.3.RELEASE'
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'org.springframework.boot'

sourceCompatibility = 1.8

ext {
	springBootVersion = '1.5.3.RELEASE'
}

repositories {
	mavenCentral()
}	

task (restaurantsJar, type: Jar) {
	from '/restaurants/src/main'
 	appendix = 'restaurants'
    bootRepackage {
    	mainClass = 'asw.project.restaurants.RestaurantApplication'
	}
	springBoot {
	    backupSource = false
	}
	manifest {
        attributes ('Main-Class': 'asw.project.restaurants.RestaurantApplication')
    }
}

task (citiesJar, type: Jar) {
	from 'cities'
 	appendix = 'cities'
    bootRepackage {
    	mainClass = 'asw.project.cities.CityRestaurantApplication'
	}
	springBoot {
	    backupSource = false
	}
	manifest {
        attributes ('Main-Class': 'asw.project.cities.CityRestaurantApplication')
    }
}

jar.enabled = false
bootRepackage.withJarTask = [restaurantsJar, citiesJar]

dependencies {
	compile('org.springframework.boot:spring-boot-starter-web')
	testCompile('org.springframework.boot:spring-boot-starter-test')
}